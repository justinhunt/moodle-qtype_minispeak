define("qtype_minispeak/smartframe",["jquery","core/log","qtype_minispeak/definitions"],(function($,log,def){return log.debug("minispeak SmartFrame: initialising"),{clone:function(){return $.extend(!0,{},this)},init:function(index,itemdata,quizhelper){this.register_events(index,itemdata,quizhelper)},next_question:function(percent){var stepdata={};stepdata.index=this.index,stepdata.hasgrade=!0,stepdata.totalitems=10,stepdata.correctitems=percent/10,stepdata.grade=percent,this.quizhelper.do_next(stepdata)},register_events:function(index,itemdata,quizhelper){var self=this;self.index=index,self.quizhelper=quizhelper,$("#"+itemdata.uniqueid+"_container .minispeak_nextbutton").on("click",(function(e){self.next_question(0)})),window.addEventListener("message",(function(event){if(log.debug("messageevent",event),event.origin===itemdata.smartframehost){var gradesdata=event.data;if(void 0!==gradesdata&&gradesdata.itemid==itemdata.id){gradesdata.percent;$(".minispeak_nextbutton").prop("disabled",!0),setTimeout((function(){$(".minispeak_nextbutton").prop("disabled",!1),self.next_question(gradesdata.percent)}),500)}}}),!1)}}}));

//# sourceMappingURL=smartframe.min.js.map